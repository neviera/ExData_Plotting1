lines(selectedData$DateTime,selectedData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"),
lwd=c(1,1,1), col=c("black","red","blue"), bty="n")
#restore settings
par(old.par)
plot(selectedData$DateTime, selectedData$Voltage)
plot(DateTime, Voltage,type="l", xlab="datetime")
plot(selectedData$DateTime, selectedDate$Voltage,type="l", xlab="datetime")
plot(selectedData$DateTime, selectedData$Voltage,type="l", xlab="datetime")
plot(selectedData$DateTime, selectedData$Voltage,type="l", xlab="datetime", ylab="Voltage")
datetime<-selectedData$DateTime
plot(datetime,selectedData$Voltage)
windows()
#save settings
old.par<-par(no.readonly = T)
#set to draw charts in 2x2 matrix columnwise
par(mfcol=c(2,2))
#plot first chart (topleft)
plot(datetime,selectedData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power")
#plot second chart (down left)
#get range for y axis
yrange<-range(c(selectedData$Sub_metering_1, selectedData$Sub_metering_2, selectedData$Sub_metering_3))
#plot base with first line for submetering_1
plot(datetime,selectedData$Sub_metering_1, ylim=yrange, type = "l", col="black", xlab="", ylab="Energy sub metering")
#add line for submetering_2
lines(datetime,selectedData$Sub_metering_2, col="red")
#add line for submetering_3
lines(datetime,selectedData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"),
lwd=c(1,1,1), col=c("black","red","blue"), bty="n")
#plot thrird chart (top right)
plot(datetime, selectedData$Voltage,type="l", xlab="datetime", ylab="Voltage")
#restore settings
par(old.par)
windows()
#save settings
old.par<-par(no.readonly = T)
#set to draw charts in 2x2 matrix columnwise
par(mfcol=c(2,2))
#plot first chart (topleft)
plot(datetime,selectedData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power")
#plot second chart (bottom left)
#get range for y axis
yrange<-range(c(selectedData$Sub_metering_1, selectedData$Sub_metering_2, selectedData$Sub_metering_3))
#plot base with first line for submetering_1
plot(datetime,selectedData$Sub_metering_1, ylim=yrange, type = "l", col="black", xlab="", ylab="Energy sub metering")
#add line for submetering_2
lines(datetime,selectedData$Sub_metering_2, col="red")
#add line for submetering_3
lines(datetime,selectedData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"),
lwd=c(1,1,1), col=c("black","red","blue"), bty="n")
#plot thrird chart (top right)
plot(datetime, selectedData$Voltage,type="l", ylab="Voltage")
#plot fourth chart (bottom right)
plot(datetime, selectedData$Global_reactive_power, ylab = "Global_reactive_power" )
#restore settings
par(old.par)
#setting system locale, it helps to display plot axis properly
Sys.setlocale(category = "LC_ALL", locale = "english")
file<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/household_power_consumption.txt"
#check if file exists
folder<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/ExData_Plotting1"
if((file.exists(file))&(dir.exists(folder))){
setwd(folder)
#get column classes
firstRows <- read.table(file, header = TRUE, nrows = 5, sep=";", dec=".")
colCl <- sapply(firstRows, class)
#read only selected rows
selectedData<-read.csv.sql(file, sql="select * from file where Date='1/2/2007' or Date='2/2/2007'", header=TRUE, sep=";", colClasses=colCl)
closeAllConnections()
#convert Date to date format
tempTime<-paste(selectedData$Date,selectedData$Time)
datetime<-strptime(tempTime,format="%d/%m/%Y %H:%M:%S", tz="")
#open PGN device
png(filename = "plot4.png", width=480, height=480, units = "px")
#save settings
old.par<-par(no.readonly = T)
#set to draw charts in 2x2 matrix columnwise
par(mfcol=c(2,2))
#plot first chart (topleft)
plot(datetime,selectedData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power")
#plot second chart (bottom left)
#get range for y axis
yrange<-range(c(selectedData$Sub_metering_1, selectedData$Sub_metering_2, selectedData$Sub_metering_3))
#plot base with first line for submetering_1
plot(datetime,selectedData$Sub_metering_1, ylim=yrange, type = "l", col="black", xlab="", ylab="Energy sub metering")
#add line for submetering_2
lines(datetime,selectedData$Sub_metering_2, col="red")
#add line for submetering_3
lines(datetime,selectedData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"),
lwd=c(1,1,1), col=c("black","red","blue"), bty="n")
#plot thrird chart (top right)
plot(datetime, selectedData$Voltage,type="l", ylab="Voltage")
#plot fourth chart (bottom right)
plot(datetime, selectedData$Global_reactive_power, type="l", ylab = "Global_reactive_power" )
#restore settings
par(old.par)
dev.off(which = dev.cur())
}
#setting system locale, it helps to display plot axis properly
Sys.setlocale(category = "LC_ALL", locale = "english")
file<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/household_power_consumption.txt"
#check if file exists
folder<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/ExData_Plotting1"
if((file.exists(file))&(dir.exists(folder))){
setwd(folder)
#get column classes
firstRows <- read.table(file, header = TRUE, nrows = 5, sep=";", dec=".")
colCl <- sapply(firstRows, class)
#read only selected rows
selectedData<-read.csv.sql(file, sql="select * from file where Date='1/2/2007' or Date='2/2/2007'", header=TRUE, sep=";", colClasses=colCl)
closeAllConnections()
#convert Date to date format
tempTime<-paste(selectedData$Date,selectedData$Time)
datetime<-strptime(tempTime,format="%d/%m/%Y %H:%M:%S", tz="")
#open PGN device
png(filename = "plot4.png", width=480, height=480, units = "px", res=300)
#save settings
old.par<-par(no.readonly = T)
#set to draw charts in 2x2 matrix columnwise
par(mfcol=c(2,2))
#plot first chart (topleft)
plot(datetime,selectedData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power")
#plot second chart (bottom left)
#get range for y axis
yrange<-range(c(selectedData$Sub_metering_1, selectedData$Sub_metering_2, selectedData$Sub_metering_3))
#plot base with first line for submetering_1
plot(datetime,selectedData$Sub_metering_1, ylim=yrange, type = "l", col="black", xlab="", ylab="Energy sub metering")
#add line for submetering_2
lines(datetime,selectedData$Sub_metering_2, col="red")
#add line for submetering_3
lines(datetime,selectedData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"),
lwd=c(1,1,1), col=c("black","red","blue"), bty="n")
#plot thrird chart (top right)
plot(datetime, selectedData$Voltage,type="l", ylab="Voltage")
#plot fourth chart (bottom right)
plot(datetime, selectedData$Global_reactive_power, type="l", ylab = "Global_reactive_power" )
#restore settings
par(old.par)
dev.off(which = dev.cur())
}
#setting system locale, it helps to display plot axis properly
Sys.setlocale(category = "LC_ALL", locale = "english")
file<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/household_power_consumption.txt"
#check if file exists
folder<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/ExData_Plotting1"
if((file.exists(file))&(dir.exists(folder))){
setwd(folder)
#get column classes
firstRows <- read.table(file, header = TRUE, nrows = 5, sep=";", dec=".")
colCl <- sapply(firstRows, class)
#read only selected rows
selectedData<-read.csv.sql(file, sql="select * from file where Date='1/2/2007' or Date='2/2/2007'", header=TRUE, sep=";", colClasses=colCl)
closeAllConnections()
#convert Date to date format
tempTime<-paste(selectedData$Date,selectedData$Time)
selectedData$DateTime<-strptime(tempTime,format="%d/%m/%Y %H:%M:%S", tz="")
#open PGN device
png(filename = "plot2.png", width=480, height=480, units = "px", res=300)
#plot2
plot(selectedData$DateTime,selectedData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power (kilowatts)")
dev.off(which = dev.cur())
}
#setting system locale, it helps to display plot axis properly
Sys.setlocale(category = "LC_ALL", locale = "english")
file<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/household_power_consumption.txt"
#check if file exists
folder<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/ExData_Plotting1"
if((file.exists(file))&(dir.exists(folder))){
setwd(folder)
#get column classes
firstRows <- read.table(file, header = TRUE, nrows = 5, sep=";", dec=".")
colCl <- sapply(firstRows, class)
#read only selected rows
selectedData<-read.csv.sql(file, sql="select * from file where Date='1/2/2007' or Date='2/2/2007'", header=TRUE, sep=";", colClasses=colCl)
closeAllConnections()
#convert Date to date format
tempTime<-paste(selectedData$Date,selectedData$Time)
selectedData$DateTime<-strptime(tempTime,format="%d/%m/%Y %H:%M:%S", tz="")
#open PGN device
png(filename = "plot2.png", width=480, height=480, units = "px", res=300, pointsize = 4)
#plot2
plot(selectedData$DateTime,selectedData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power (kilowatts)")
dev.off(which = dev.cur())
}
#open PGN device
png(filename = "plot2.png", width=480, height=480, units = "px", res=300, pointsize = 1)
#plot2
plot(selectedData$DateTime,selectedData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power (kilowatts)")
dev.off(which = dev.cur())
#open PGN device
png(filename = "plot2.png", width=480, height=480, units = "px")
#plot2
plot(selectedData$DateTime,selectedData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power (kilowatts)")
dev.off(which = dev.cur())
#setting system locale, it helps to display plot axis properly
Sys.setlocale(category = "LC_ALL", locale = "english")
file<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/household_power_consumption.txt"
#check if file exists
folder<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/ExData_Plotting1"
if((file.exists(file))&(dir.exists(folder))){
setwd(folder)
#get column classes
firstRows <- read.table(file, header = TRUE, nrows = 5, sep=";", dec=".")
colCl <- sapply(firstRows, class)
#read only selected rows
selectedData<-read.csv.sql(file, sql="select * from file where Date='1/2/2007' or Date='2/2/2007'", header=TRUE, sep=";", colClasses=colCl)
closeAllConnections()
#convert Date to date format
tempTime<-paste(selectedData$Date,selectedData$Time)
datetime<-strptime(tempTime,format="%d/%m/%Y %H:%M:%S", tz="")
#open PGN device
png(filename = "plot4.png", width=480, height=480, units = "px")
#save settings
old.par<-par(no.readonly = T)
#set to draw charts in 2x2 matrix columnwise
par(mfcol=c(2,2))
#plot first chart (topleft)
plot(datetime,selectedData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power")
#plot second chart (bottom left)
#get range for y axis
yrange<-range(c(selectedData$Sub_metering_1, selectedData$Sub_metering_2, selectedData$Sub_metering_3))
#plot base with first line for submetering_1
plot(datetime,selectedData$Sub_metering_1, ylim=yrange, type = "l", col="black", xlab="", ylab="Energy sub metering")
#add line for submetering_2
lines(datetime,selectedData$Sub_metering_2, col="red")
#add line for submetering_3
lines(datetime,selectedData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"),
lwd=c(1,1,1), col=c("black","red","blue"), bty="n")
#plot thrird chart (top right)
plot(datetime, selectedData$Voltage,type="l", ylab="Voltage")
#plot fourth chart (bottom right)
plot(datetime, selectedData$Global_reactive_power, type="l", ylab = "Global_reactive_power" )
#restore settings
par(old.par)
dev.off(which = dev.cur())
}
#open PGN device
png(filename = "plot4.png", width=480, height=480, units = "px")
#save settings
old.par<-par(no.readonly = T)
#set to draw charts in 2x2 matrix columnwise
par(mfcol=c(2,2), cex.lab=1.5)
#plot first chart (topleft)
plot(datetime,selectedData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power")
#plot second chart (bottom left)
#get range for y axis
yrange<-range(c(selectedData$Sub_metering_1, selectedData$Sub_metering_2, selectedData$Sub_metering_3))
#plot base with first line for submetering_1
plot(datetime,selectedData$Sub_metering_1, ylim=yrange, type = "l", col="black", xlab="", ylab="Energy sub metering")
#add line for submetering_2
lines(datetime,selectedData$Sub_metering_2, col="red")
#add line for submetering_3
lines(datetime,selectedData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"),
lwd=c(1,1,1), col=c("black","red","blue"), bty="n")
#plot thrird chart (top right)
plot(datetime, selectedData$Voltage,type="l", ylab="Voltage")
#plot fourth chart (bottom right)
plot(datetime, selectedData$Global_reactive_power, type="l", ylab = "Global_reactive_power" )
#restore settings
par(old.par)
dev.off(which = dev.cur())
}
#set to draw charts in 2x2 matrix columnwise
par(mfcol=c(2,2))
#plot first chart (topleft)
plot(datetime,selectedData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power")
#plot second chart (bottom left)
#get range for y axis
yrange<-range(c(selectedData$Sub_metering_1, selectedData$Sub_metering_2, selectedData$Sub_metering_3))
#plot base with first line for submetering_1
plot(datetime,selectedData$Sub_metering_1, ylim=yrange, type = "l", col="black", xlab="", ylab="Energy sub metering")
#add line for submetering_2
lines(datetime,selectedData$Sub_metering_2, col="red")
#add line for submetering_3
lines(datetime,selectedData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"),
lwd=c(1,1,1), col=c("black","red","blue"), bty="n")
#plot thrird chart (top right)
plot(datetime, selectedData$Voltage,type="l", ylab="Voltage")
#plot fourth chart (bottom right)
plot(datetime, selectedData$Global_reactive_power, type="l", ylab = "Global_reactive_power" )
#restore settings
par(old.par)
dev.off(which = dev.cur())
par(mfcol=c(2,2), cex.lab=1)
#open PGN device
png(filename = "plot4.png", width=480, height=480, units = "px")
#save settings
old.par<-par(no.readonly = T)
#set to draw charts in 2x2 matrix columnwise
par(mfcol=c(2,2))
#plot first chart (topleft)
plot(datetime,selectedData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power")
#plot second chart (bottom left)
#get range for y axis
yrange<-range(c(selectedData$Sub_metering_1, selectedData$Sub_metering_2, selectedData$Sub_metering_3))
#plot base with first line for submetering_1
plot(datetime,selectedData$Sub_metering_1, ylim=yrange, type = "l", col="black", xlab="", ylab="Energy sub metering")
#add line for submetering_2
lines(datetime,selectedData$Sub_metering_2, col="red")
#add line for submetering_3
lines(datetime,selectedData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"),
lwd=c(1,1,1), col=c("black","red","blue"), bty="n")
#plot thrird chart (top right)
plot(datetime, selectedData$Voltage,type="l", ylab="Voltage")
#plot fourth chart (bottom right)
plot(datetime, selectedData$Global_reactive_power, type="l", ylab = "Global_reactive_power" )
#restore settings
par(old.par)
dev.off(which = dev.cur())
}
rm(list=ls())
file<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/household_power_consumption.txt"
#check if file exists
folder<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/ExData_Plotting1"
if((file.exists(file))&(dir.exists(folder))){
setwd(folder)
#get column classes
firstRows <- read.table(file, header = TRUE, nrows = 5, sep=";", dec=".")
colCl <- sapply(firstRows, class)
#read only selected rows
sData<-read.csv.sql(file, sql="select * from file where Date='1/2/2007' or Date='2/2/2007'", header=TRUE, sep=";", colClasses=colCl)
closeAllConnections()
#open PGN device
png(filename = "plot1.png", width=480, height=480, units = "px")
#plot1
hist(sData$Global_active_power, main="Global Active Power", xlab = "Global Active Power (kilowatts)", col = "red")
dev.off(which = dev.cur())
}
#setting system locale, it helps to display plot axis properly
Sys.setlocale(category = "LC_ALL", locale = "english")
file<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/household_power_consumption.txt"
#check if file exists
folder<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/ExData_Plotting1"
if((file.exists(file))&(dir.exists(folder))){
setwd(folder)
#get column classes
firstRows <- read.table(file, header = TRUE, nrows = 5, sep=";", dec=".")
colCl <- sapply(firstRows, class)
#read only selected rows
sData<-read.csv.sql(file, sql="select * from file where Date='1/2/2007' or Date='2/2/2007'", header=TRUE, sep=";", colClasses=colCl)
closeAllConnections()
#convert Date to date format
tempTime<-paste(sData$Date,sData$Time)
sData$DateTime<-strptime(tempTime,format="%d/%m/%Y %H:%M:%S", tz="")
#open PGN device
png(filename = "plot2.png", width=480, height=480, units = "px")
#plot2
plot(sData$DateTime,sData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power (kilowatts)")
dev.off(which = dev.cur())
}
#setting system locale, it helps to display plot axis properly
Sys.setlocale(category = "LC_ALL", locale = "english")
file<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/household_power_consumption.txt"
#check if file exists
folder<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/ExData_Plotting1"
if((file.exists(file))&(dir.exists(folder))){
setwd(folder)
#get column classes
firstRows <- read.table(file, header = TRUE, nrows = 5, sep=";", dec=".")
colCl <- sapply(firstRows, class)
#read only selected rows
sData<-read.csv.sql(file, sql="select * from file where Date='1/2/2007' or Date='2/2/2007'", header=TRUE, sep=";", colClasses=colCl)
closeAllConnections()
#convert Date to date format
tempTime<-paste(sData$Date,sData$Time)
sData$DateTime<-strptime(tempTime,format="%d/%m/%Y %H:%M:%S", tz="")
#save settings
old.par<-par(no.readonly = T)
#open PGN device
png(filename = "plot3.png", width=480, height=480, units = "px")
#plot3
#get range for y axis
yrange<-range(c(sData$Sub_metering_1, sData$Sub_metering_2, sData$Sub_metering_3))
#plot base
plot(sData$DateTime,sData$Sub_metering_1, ylim=yrange, type = "l", col="black", xlab="", ylab="Energy sub metering")
#add line for submetering_2
lines(sData$DateTime,sData$Sub_metering_2, col="red")
#add line for submetering_3
lines(sData$DateTime,sData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"), lwd=c(1,1,1), col=c("black","red","blue"))
#restore settings
par(old.par)
dev.off(which = dev.cur())
}
#setting system locale, it helps to display plot axis properly
Sys.setlocale(category = "LC_ALL", locale = "english")
file<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/household_power_consumption.txt"
#check if file exists
folder<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/ExData_Plotting1"
if((file.exists(file))&(dir.exists(folder))){
setwd(folder)
#get column classes
firstRows <- read.table(file, header = TRUE, nrows = 5, sep=";", dec=".")
colCl <- sapply(firstRows, class)
#read only selected rows
sData<-read.csv.sql(file, sql="select * from file where Date='1/2/2007' or Date='2/2/2007'", header=TRUE, sep=";", colClasses=colCl)
closeAllConnections()
#convert Date to date format
tempTime<-paste(sData$Date,sData$Time)
sData$DateTime<-strptime(tempTime,format="%d/%m/%Y %H:%M:%S", tz="")
#save settings
old.par<-par(no.readonly = T)
#open PGN device
png(filename = "plot3.png", width=480, height=480, units = "px")
#plot3
#get range for y axis
yrange<-range(c(sData$Sub_metering_1, sData$Sub_metering_2, sData$Sub_metering_3))
#plot base
plot(sData$DateTime,sData$Sub_metering_1, ylim=yrange, type = "l", col="black", xlab="", ylab="Energy sub metering")
#add line for submetering_2
lines(sData$DateTime,sData$Sub_metering_2, col="red")
#add line for submetering_3
lines(sData$DateTime,sData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"), lwd=c(1,1,1), col=c("black","red","blue"))
#restore settings
par(old.par)
dev.off(which = dev.cur())
}
#setting system locale, it helps to display plot axis properly
Sys.setlocale(category = "LC_ALL", locale = "english")
file<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/household_power_consumption.txt"
#check if file exists
folder<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/ExData_Plotting1"
if((file.exists(file))&(dir.exists(folder))){
setwd(folder)
#get column classes
firstRows <- read.table(file, header = TRUE, nrows = 5, sep=";", dec=".")
colCl <- sapply(firstRows, class)
#read only selected rows
sData<-read.csv.sql(file, sql="select * from file where Date='1/2/2007' or Date='2/2/2007'", header=TRUE, sep=";", colClasses=colCl)
closeAllConnections()
#convert Date to date format
tempTime<-paste(sData$Date,sData$Time)
sData$DateTime<-strptime(tempTime,format="%d/%m/%Y %H:%M:%S", tz="")
#open PGN device
png(filename = "plot3.png", width=480, height=480, units = "px")
#plot3
#get range for y axis
yrange<-range(c(sData$Sub_metering_1, sData$Sub_metering_2, sData$Sub_metering_3))
#plot base
plot(sData$DateTime,sData$Sub_metering_1, ylim=yrange, type = "l", col="black", xlab="", ylab="Energy sub metering")
#add line for submetering_2
lines(sData$DateTime,sData$Sub_metering_2, col="red")
#add line for submetering_3
lines(sData$DateTime,sData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"), lwd=c(1,1,1), col=c("black","red","blue"))
dev.off(which = dev.cur())
}
#setting system locale, it helps to display plot axis properly
Sys.setlocale(category = "LC_ALL", locale = "english")
file<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/household_power_consumption.txt"
#check if file exists
folder<-"E:/Julius/Studies/Data Science Specialization/Exploratory Data Analysis/Week1Project/ExData_Plotting1"
if((file.exists(file))&(dir.exists(folder))){
setwd(folder)
#get column classes
firstRows <- read.table(file, header = TRUE, nrows = 5, sep=";", dec=".")
colCl <- sapply(firstRows, class)
#read only selected rows
sData<-read.csv.sql(file, sql="select * from file where Date='1/2/2007' or Date='2/2/2007'", header=TRUE, sep=";", colClasses=colCl)
closeAllConnections()
#convert Date to date format
tempTime<-paste(sData$Date,sData$Time)
datetime<-strptime(tempTime,format="%d/%m/%Y %H:%M:%S", tz="")
#open PGN device
png(filename = "plot4.png", width=480, height=480, units = "px")
#save settings
old.par<-par(no.readonly = T)
#set to draw charts in 2x2 matrix columnwise
par(mfcol=c(2,2))
#plot first chart (topleft)
plot(datetime,sData$Global_active_power, type = "l", xlab = "", ylab="Global Active Power")
#plot second chart (bottom left)
#get range for y axis
yrange<-range(c(sData$Sub_metering_1, sData$Sub_metering_2, sData$Sub_metering_3))
#plot base with first line for submetering_1
plot(datetime,sData$Sub_metering_1, ylim=yrange, type = "l", col="black", xlab="", ylab="Energy sub metering")
#add line for submetering_2
lines(datetime,sData$Sub_metering_2, col="red")
#add line for submetering_3
lines(datetime,sData$Sub_metering_3, col="blue")
#set legend
legend("topright", legend=c("Sub_metering_1","Sub_metering_2","Sub_metering_3"),
lwd=c(1,1,1), col=c("black","red","blue"), bty="n")
#plot thrird chart (top right)
plot(datetime, sData$Voltage,type="l", ylab="Voltage")
#plot fourth chart (bottom right)
plot(datetime, sData$Global_reactive_power, type="l", ylab = "Global_reactive_power" )
#restore settings
par(old.par)
dev.off(which = dev.cur())
}
